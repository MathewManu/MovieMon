apply plugin: 'java'
apply plugin: 'application'
apply plugin: 'war'
apply plugin: 'eclipse'

mainClassName = "imdb.TestApp"

sourceCompatibility = 1.7
version = '1.0'
war {
    manifest {
        attributes 'Implementation-Title': 'Movie Mon',
                   'Implementation-Version': version
    }
}

repositories {
    mavenCentral()
}

dependencies {
    compile group: 'commons-collections', name: 'commons-collections', version: '3.2'
    compile 'com.google.code.gson:gson:2.3.1'
    compile 'commons-io:commons-io:2.4'
    compile 'org.hsqldb:hsqldb:2.3.3'
    compile 'org.mybatis:mybatis:3.3.0'
    compile 'org.jsoup:jsoup:1.8.2'
    compile 'org.glassfish.jersey.containers:jersey-container-servlet:2.14'
    compile 'org.glassfish.jersey.media:jersey-media-json-jackson:2.14'
    
}

uploadArchives {
    repositories {
       flatDir {
           dirs 'repos'
       }
    }
}

task myDist(type: Zip){
  def baseDir = { archiveName - ".zip" }
  into(baseDir){
    from(project.file("src/dist"))
    into("lib") {
        from(jar)
        from(project.configurations.runtime)
    }
    
    into(".") {
    	from("src/main/resources/mybat.bat")
    }
  }
}